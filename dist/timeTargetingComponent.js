!function(){"use strict";angular.module("timeTargetingModule",[]).service("defaultTimeAdapter",[function(){return{objToString:function(e,t){var o,r="ABCDEFGHIJKLMNOPQRSTUVWXYZ",l="",n=0,t=t||!1;for(var a in e)if(e.hasOwnProperty(a)){n++,o="";for(var s in e[a])e[a][s]&&(o+=r.charAt(s));if(8==n&&o.length){var c=r.slice(r.indexOf(o[0]),r.indexOf(o[o.length-1])+1);if(o!=c&&t){for(var d=r.indexOf(o[0]);d<r.indexOf(o[o.length-1])+1;d++)e[a][d]=1;o=c}}o.length&&(l+=n+o)}return l},stringToObj:function(e,t){},isHolidaysValid:function(e){var t,o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=!1,l=0;for(var n in e)if(8==++l){t="";for(var a in e[n])e[n][a]&&(t+=o.charAt(a));t.length?t==o.slice(o.indexOf(t[0]),o.indexOf(t[t.length-1])+1)&&(r=!0):r=!0}return r}}}]).component("timeTargetingComponent",{bindings:{model:"="},templateUrl:"timeTargetingComponent.html",controller:["$timeout",function(e){var t=this;t.selectValue=0,t.selectStartDay="",t.selectStartHour="",t.selectStartDayFor=0,t.selectEndDayFor=0,t.selectStartHourFor=0,t.selectEndHourFor=0,t.defaultSelectValue=1,t.$onInit=function(){for(var e=0;e<t.model.days.length;e++){t.model.grid[e]={};for(var o=0;o<t.model.hours.length;o++)t.model.grid[e][o]=0}},t.selectStart=function(e,o){t.selectStartDay=e,t.selectStartHour=o,t.model.grid[e][o]?t.selectValue=0:t.selectValue=1,angular.element(document).one("mouseup",function(){t.selectEnd()})},t.selectEnter=function(e,o){if(t.selectStartDay>e?(t.selectStartDayFor=e,t.selectEndDayFor=t.selectStartDay):(t.selectStartDayFor=t.selectStartDay,t.selectEndDayFor=e),t.selectStartHour>o?(t.selectStartHourFor=o,t.selectEndHourFor=t.selectStartHour):(t.selectStartHourFor=t.selectStartHour,t.selectEndHourFor=o),""!==t.selectStartDay)for(var r=t.selectStartDayFor;r<=t.selectEndDayFor;r++)for(var l=t.selectStartHourFor;l<=t.selectEndHourFor;l++)t.model.grid[r][l]=t.selectValue},t.selectColumn=function(e){for(var o=1,r=0;r<t.model.days.length;r++)if(0==t.model.grid[r][e]){o=0;break}for(t.selectValue=o?0:1,r=0;r<t.model.days.length;r++)t.model.grid[r][e]=t.selectValue;t.model.onChange()},t.selectRow=function(e){for(var o=1,r=0;r<t.model.hours.length;r++)if(0==t.model.grid[e][r]){o=0;break}for(t.selectValue=o?0:1,r=0;r<t.model.hours.length;r++)t.model.grid[e][r]=t.selectValue;t.model.onChange()},t.selectByCoords=function(e){if(-1!=e&&t.model.buttons[e].noclear)t.model.onChange();else{for(var o=0;o<t.model.days.length;o++)for(var r=0;r<t.model.hours.length;r++)t.model.grid[o][r]=0;if(-1!==e){if(t.model.buttons[e].coords.length)for(t.selectStartDayFor=t.model.buttons[e].coords[0],t.selectEndDayFor=t.model.buttons[e].coords[2],t.selectStartHourFor=t.model.buttons[e].coords[1],t.selectEndHourFor=t.model.buttons[e].coords[3],o=t.selectStartDayFor;o<=t.selectEndDayFor;o++)for(r=t.selectStartHourFor;r<=t.selectEndHourFor;r++)t.model.grid[o][r]=t.defaultSelectValue;t.model.onChange()}else t.model.onChange()}},t.selectEnd=function(){t.selectStartDay="",t.selectStartHour="",t.model.onChange()},t.selectTimeTargeting=function(e){for(var o=0;o<t.model.buttons.length;o++)t.model.buttons[o].selected=!1;t.model.buttons[e].selected=!0,t.selectByCoords(e)}}]})}();